{"version":3,"sources":["../../src/utils/fetchLatestWaWebVersion.ts"],"sourcesContent":["import axios, { AxiosRequestConfig } from 'axios';\nimport { fetchLatestBaileysVersion, WAVersion } from 'baileys';\n\nexport const fetchLatestWaWebVersion = async (options: AxiosRequestConfig<{}>) => {\n  try {\n    const { data } = await axios.get('https://web.whatsapp.com/sw.js', {\n      ...options,\n      responseType: 'json',\n    });\n\n    const regex = /\\\\?\"client_revision\\\\?\":\\s*(\\d+)/;\n    const match = data.match(regex);\n\n    if (!match?.[1]) {\n      return {\n        version: (await fetchLatestBaileysVersion()).version as WAVersion,\n        isLatest: false,\n        error: {\n          message: 'Could not find client revision in the fetched content',\n        },\n      };\n    }\n\n    const clientRevision = match[1];\n\n    return {\n      version: [2, 3000, +clientRevision] as WAVersion,\n      isLatest: true,\n    };\n  } catch (error) {\n    return {\n      version: (await fetchLatestBaileysVersion()).version as WAVersion,\n      isLatest: false,\n      error,\n    };\n  }\n};\n"],"mappings":"6iBAAA,IAAAA,EAAA,GAAAC,EAAAD,EAAA,6BAAAE,IAAA,eAAAC,EAAAH,GAAA,IAAAI,EAA0C,oBAC1CC,EAAqD,mBAExCH,EAA0B,MAAOI,GAAoC,CAChF,GAAI,CACF,GAAM,CAAE,KAAAC,CAAK,EAAI,MAAM,EAAAC,QAAM,IAAI,iCAAkC,CACjE,GAAGF,EACH,aAAc,MAChB,CAAC,EAEKG,EAAQ,mCACRC,EAAQH,EAAK,MAAME,CAAK,EAE9B,OAAKC,IAAQ,CAAC,EAYP,CACL,QAAS,CAAC,EAAG,IAAM,CAHEA,EAAM,CAAC,CAGM,EAClC,SAAU,EACZ,EAdS,CACL,SAAU,QAAM,6BAA0B,GAAG,QAC7C,SAAU,GACV,MAAO,CACL,QAAS,uDACX,CACF,CASJ,OAASC,EAAO,CACd,MAAO,CACL,SAAU,QAAM,6BAA0B,GAAG,QAC7C,SAAU,GACV,MAAAA,CACF,CACF,CACF","names":["fetchLatestWaWebVersion_exports","__export","fetchLatestWaWebVersion","__toCommonJS","import_axios","import_baileys","options","data","axios","regex","match","error"]}
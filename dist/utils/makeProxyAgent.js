var a=Object.defineProperty;var y=Object.getOwnPropertyDescriptor;var d=Object.getOwnPropertyNames;var h=Object.prototype.hasOwnProperty;var R=(r,t)=>{for(var o in t)a(r,o,{get:t[o],enumerable:!0})},k=(r,t,o,e)=>{if(t&&typeof t=="object"||typeof t=="function")for(let s of d(t))!h.call(r,s)&&s!==o&&a(r,s,{get:()=>t[s],enumerable:!(e=y(t,s))||e.enumerable});return r};var x=r=>k(a({},"__esModule",{value:!0}),r);var T={};R(T,{makeProxyAgent:()=>_,makeProxyAgentUndici:()=>S});module.exports=x(T);var u=require("fetch-socks"),l=require("https-proxy-agent"),g=require("socks-proxy-agent"),$=require("undici");function P(r){let t=new URL(r),o="http:",e="socks:",s="socks5:";switch(t.protocol){case o:return new l.HttpsProxyAgent(t);case e:case s:{let n="";return t.username&&t.password?n=`socks://${t.username}:${t.password}@${t.hostname}:${t.port}`:n=`socks://${t.hostname}:${t.port}`,new g.SocksProxyAgent(n)}default:throw new Error(`Unsupported proxy protocol: ${t.protocol}`)}}function _(r){if(typeof r=="string")return P(r);let{host:t,password:o,port:e,protocol:s,username:n}=r,i=`${s}://${t}:${e}`;return n&&o&&(i=`${s}://${n}:${o}@${t}:${e}`),P(i)}function S(r){let t,o;if(typeof r=="string")o=new URL(r).protocol.replace(":",""),t=r;else{let{host:p,password:c,port:m,protocol:w,username:O}=r;o=(w||"http").replace(":",""),o==="socks"&&(o="socks5");let f=O&&c?`${O}:${c}@`:"";t=`${o}://${f}${p}:${m}`}o=o.toLowerCase();let e="http",s="https",n="socks4",i="socks5";switch(o){case e:case s:return new $.ProxyAgent(t);case n:case i:{let p=5;n===o&&(p=4);let c=new URL(t);return(0,u.socksDispatcher)({type:p,host:c.hostname,port:Number(c.port),userId:c.username||void 0,password:c.password||void 0})}default:throw new Error(`Unsupported proxy protocol: ${o}`)}}0&&(module.exports={makeProxyAgent,makeProxyAgentUndici});
//# sourceMappingURL=makeProxyAgent.js.map
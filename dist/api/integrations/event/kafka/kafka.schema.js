var o=Object.defineProperty;var E=Object.getOwnPropertyDescriptor;var S=Object.getOwnPropertyNames;var T=Object.prototype.hasOwnProperty;var p=(i,t)=>{for(var e in t)o(i,e,{get:t[e],enumerable:!0})},c=(i,t,e,r)=>{if(t&&typeof t=="object"||typeof t=="function")for(let n of S(t))!T.call(i,n)&&n!==e&&o(i,n,{get:()=>t[n],enumerable:!(r=E(t,n))||r.enumerable});return i};var A=i=>c(o({},"__esModule",{value:!0}),i);var u={};p(u,{kafkaSchema:()=>l});module.exports=A(u);var m=require("uuid");var a=class a{constructor(t,e,r,n){this.prisma=t,this.monitor=e,this.status=r,this.name=n}set prisma(t){this.prismaRepository=t}get prisma(){return this.prismaRepository}set monitor(t){this.waMonitor=t}get monitor(){return this.waMonitor}set name(t){this.integrationName=t}get name(){return this.integrationName}set status(t){this.integrationStatus=t}get status(){return this.integrationStatus}async set(t,e){if(this.status)return e[this.name]?.enabled?e[this.name].events.length===0&&(e[this.name].events=a.events):e[this.name].events=[],this.prisma[this.name].upsert({where:{instanceId:this.monitor.waInstances[t].instanceId},update:{enabled:e[this.name]?.enabled,events:e[this.name].events},create:{enabled:e[this.name]?.enabled,events:e[this.name].events,instanceId:this.monitor.waInstances[t].instanceId}})}async get(t){if(!this.status)return;if(this.monitor.waInstances[t]===void 0)return null;let e=await this.prisma[this.name].findUnique({where:{instanceId:this.monitor.waInstances[t].instanceId}});return e||null}};a.events=["APPLICATION_STARTUP","QRCODE_UPDATED","MESSAGES_SET","MESSAGES_UPSERT","MESSAGES_EDITED","MESSAGES_UPDATE","MESSAGES_DELETE","SEND_MESSAGE","SEND_MESSAGE_UPDATE","CONTACTS_SET","CONTACTS_UPSERT","CONTACTS_UPDATE","PRESENCE_UPDATE","CHATS_SET","CHATS_UPSERT","CHATS_UPDATE","CHATS_DELETE","GROUPS_UPSERT","GROUP_UPDATE","GROUP_PARTICIPANTS_UPDATE","CONNECTION_UPDATE","LABELS_EDIT","LABELS_ASSOCIATION","CALL","TYPEBOT_START","TYPEBOT_CHANGE_STATUS","REMOVE_INSTANCE","LOGOUT_INSTANCE","INSTANCE_CREATE","INSTANCE_DELETE","STATUS_INSTANCE"];var s=a;var l={$id:(0,m.v4)(),type:"object",properties:{enabled:{type:"boolean",enum:[!0,!1]},events:{type:"array",minItems:0,items:{type:"string",enum:s.events}}},required:["enabled"]};0&&(module.exports={kafkaSchema});
//# sourceMappingURL=kafka.schema.js.map